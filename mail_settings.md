## Настройки ящика
На странице настроек есть возможность отредактировать данные уже существующего ящика и создать новый ящик. При редактировании отправляется запрос с целью получения существующих настроек.

#### Resourse URL

GET /ui/api/v1/ajax/mail/settings/{id} (запрос для существующего ящика)

#### Пример ответа

```
response: {
  'email'=>'mail@vk.com',
  'setting'=>{
    'imap'=>{
      'login'=>false,
      'server'=>'imap.yandex.ru',
      'port'=>993,
      'ssl'=>true,
    },
}
```

### Поиск настроек сервера
После того как будет отредактирован адрес почтового ящика и поле ввода адреса потеряет фокус, будет сгенерировано событие потери фокуса. Следом отправится запрос на настройки для сервера, которому принадлежит этот адрес.

#### Resourse URL
GET /ui/api/v1/ajax/mail/settings/find

#### Данные на запроса
```
request:{
  'email'=>'mail@vk.com'
}
```
#### Пример ответа
```
# если нашли настройки
response: {
  'setting'=>{
    'imap'=>{
      'server'=>'imap.yandex.ru',
      'port'=>993,
      'ssl'=>true,
    },
}

# если нет данных в таблице (или другим образом не нашли настройки)
response: {}
```
### Сохранение данных
После заполнения всех полей отправляется запрос на сохранение данных. Скрипт осуществляет валидацию введенных данных и пытается авторизоваться на сервере. В случае успешной авторизации обновляются значения в таблице для уже существующего контакта, либо добавляются новые для только что созданного.

#### Примечание
Необходимо продумать коды ошибок.

#### Resourse URL
POST /ui/api/v1/ajax/mail/settings (при запросе для нового ящика)

POST /ui/api/v1/ajax/mail/settings/{id} (при запросе для существующего ящика)

#### Данные для запроса
```
request:{
  'email'=>'mail@vk.com',
  'password'=>'111111',
  'setting'=>{
    'imap'=>{
      'server'=>'imap.yandex.ru',
      'port'=>993,
      'ssl'=>true,
    },
}

```
#### Пример ответа
```
# если отредактировали данные для ящика
response:{
  'response'=>'success'
}

# если создали новый ящик
response:{
  'id'=>517,
  'email'=>'mail@vk.com',
  'action'=>true,
}

# возникла ошибка
{
  'error'=>{
    'email'=>'invalid',
    'password'=>'invalid',
    'imap'=>{
      'server'=>'invalid',
      'port'=>'invalid',
    }
  }
}
```